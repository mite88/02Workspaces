<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!--
        reduce()함수

        배열을 순회하면서 원소의 값을 하나의 값으로 줄여서(하나의 결과값) 반환
        
        var oldArr = [1,2,3,...];
        var newArr =  oldArr.reduce(
            callbackFunction (preval, currval, currIdx, arr) {
               실행부;
            },  초기값
        );

        * 초기값이 있을경우 : 배열의 크기만큼반복
        * 초기값이 없을경우 : 첫번째요소가 초기값이므로 배열크기-1만큼 반복
    
        [콜백함수의 파라미터]
        accumulator : 누산기. 콜백의 반환값을 누적. 콜백의 이전 반환값 또는, 콜백의 첫 번째 호출이면서 initialValue를 제공한 경우에는 initialValue의 값임
        currentValue : 처리할 현재 요소
        currentIndex (Optional) : 처리할 현재 요소의 인덱스. initialValue를 제공한 경우 0, 아니면 1부터 시작
        array (Optional) : reduce()를 호출한 배열
    
    -->
    <script>
        console.error("reduce Test1() called..기본사용법 ");
        //초기값이 없는상태이므로 previousVal은 첫번째원소가 출력
        //두번째반복부턴 없으므로 undefined이 출력됨 => 4번실행

        //초기값x 콜백함수 반환값x
        (function reduceTest1() {
            var array = [0, 1, 2, 3, 4];
            array.reduce(function (preval, currval, currIdx, arr) {
                console.log('배열의 첫번째값 혹은 초기값:' + preval);
                console.log('현재요소의 값 :' + currval);
                console.log('현대요소의 인덱스:' + currIdx);
                console.log('배열:' + arr);
            });
        })();

        console.error("reduceTest2() called..return값 사용하기");
        //초기값x 콜백함수 반환값o
        (function reduceTest2() {
            var array = [0, 1, 2, 3, 4];
            var sum = array.reduce(function (preval, currval, currIdx, arr) {
                console.log('배열의 첫번째값 혹은 리턴값:' + preval);
                console.log('현재요소의 값 :' + currval);
                console.log('현대요소의 인덱스:' + currIdx);

                return preval + currval;
            });
            console.log("sum=" + sum);
        })();

        console.error("reduceTest3 called...초기값 사용하기");
        //초기값o 콜백함수 반환값o
        (function reduceTest3() {
            var array = [0, 1, 2, 3, 4];
            var sum = array.reduce(function (preval, currval, currIdx, arr) {
                console.log('배열의 첫번째값 혹은 이전값:' + preval);
                console.log('현재요소의 값 :' + currval);
                console.log('현대요소의 인덱스:' + currIdx);
                return preval + currval;
            }, 2);
            console.log("sum=" + sum);
        })();

        console.error("reduceTest4() called..배열에서 중복값 제거하는 함수 구현");
        //초기값을빈 배열로지정하여 중복제거
        (function reduceTest4() {
            var array = [0, 1, 2, 3, 3, 3, 4, 5, 5, 6, 6];
            var overlapArray = array.reduce(
                function (preVal, currval, currIdx) {
                console.log("preval=" + preVal, "currval=" + currval);
                if (preVal.indexOf(currval) < 0) {
                    preVal.push(currval);
                }
                return preVal;
            }, []);
            console.log('결과=' + overlapArray);
        })(); 
    </script>

</head>

<body>

</body>

</html>